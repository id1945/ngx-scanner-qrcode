{"version":3,"file":"index.js","sources":["../build/zbar.js","../src/instance.ts","../src/enum.ts","../src/CppObject.ts","../src/ZBarSymbol.ts","../src/ZBarImage.ts","../src/ZBarScanner.ts","../src/module.ts"],"sourcesContent":["\nvar zbarWasm = (() => {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction(moduleArg = {}) {\n\nvar Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise((resolve,reject)=>{readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=typeof window==\"object\";var ENVIRONMENT_IS_WORKER=typeof importScripts==\"function\";var ENVIRONMENT_IS_NODE=typeof process==\"object\"&&typeof process.versions==\"object\"&&typeof process.versions.node==\"string\";var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;if(ENVIRONMENT_IS_NODE){var fs=require(\"fs\");var nodePath=require(\"path\");if(ENVIRONMENT_IS_WORKER){scriptDirectory=nodePath.dirname(scriptDirectory)+\"/\"}else{scriptDirectory=__dirname+\"/\"}read_=(filename,binary)=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);return fs.readFileSync(filename,binary?undefined:\"utf8\")};readBinary=filename=>{var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}return ret};readAsync=(filename,onload,onerror,binary=true)=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);fs.readFile(filename,binary?undefined:\"utf8\",(err,data)=>{if(err)onerror(err);else onload(binary?data.buffer:data)})};if(!Module[\"thisProgram\"]&&process.argv.length>1){thisProgram=process.argv[1].replace(/\\\\/g,\"/\")}arguments_=process.argv.slice(2);quit_=(status,toThrow)=>{process.exitCode=status;throw toThrow};Module[\"inspect\"]=()=>\"[Emscripten Module object]\"}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}{read_=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=title=>document.title=title}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime=Module[\"noExitRuntime\"]||true;if(typeof WebAssembly!=\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var wasmExports;var ABORT=false;var EXITSTATUS;var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module[\"HEAP8\"]=HEAP8=new Int8Array(b);Module[\"HEAP16\"]=HEAP16=new Int16Array(b);Module[\"HEAP32\"]=HEAP32=new Int32Array(b);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(b);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(b);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(b);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(b);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(b)}var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}function isFileURI(filename){return filename.startsWith(\"file://\")}var wasmBinaryFile;wasmBinaryFile=\"ngx-scanner-qrcode.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch==\"function\"&&!isFileURI(binaryFile)){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+binaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(()=>getBinarySync(binaryFile))}else if(readAsync){return new Promise((resolve,reject)=>{readAsync(binaryFile,response=>resolve(new Uint8Array(response)),reject)})}}return Promise.resolve().then(()=>getBinarySync(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(instance=>instance).then(receiver,reason=>{err(\"failed to asynchronously prepare wasm: \"+reason);abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming==\"function\"&&!isDataURI(binaryFile)&&!isFileURI(binaryFile)&&!ENVIRONMENT_IS_NODE&&typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err(\"wasm streaming compile failed: \"+reason);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(binaryFile,imports,callback)})})}return instantiateArrayBuffer(binaryFile,imports,callback)}function createWasm(){var info={\"a\":wasmImports};function receiveInstance(instance,module){var exports=instance.exports;wasmExports=exports;wasmMemory=wasmExports[\"g\"];updateMemoryViews();wasmTable=wasmExports[\"s\"];addOnInit(wasmExports[\"h\"]);removeRunDependency(\"wasm-instantiate\");return exports}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}if(Module[\"instantiateWasm\"]){try{return Module[\"instantiateWasm\"](info,receiveInstance)}catch(e){err(\"Module.instantiateWasm callback failed with error: \"+e);readyPromiseReject(e)}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult).catch(readyPromiseReject);return{}}var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};var nowIsMonotonic=true;var __emscripten_get_now_is_monotonic=()=>nowIsMonotonic;function _emscripten_date_now(){return Date.now()}var _emscripten_get_now;_emscripten_get_now=()=>performance.now();var getHeapMax=()=>2147483648;var growMemory=size=>{var b=wasmMemory.buffer;var pages=size-b.byteLength+65535>>>16;try{wasmMemory.grow(pages);updateMemoryViews();return 1}catch(e){}};var _emscripten_resize_heap=requestedSize=>{var oldSize=HEAPU8.length;requestedSize>>>=0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}var alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false};var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):undefined;var UTF8ArrayToString=(heapOrArray,idx,maxBytesToRead)=>{var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str};var UTF8ToString=(ptr,maxBytesToRead)=>ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\";var SYSCALLS={varargs:undefined,get(){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr(ptr){var ret=UTF8ToString(ptr);return ret}};var _fd_close=fd=>52;function convertI32PairToI53Checked(lo,hi){return hi+2097152>>>0<4194305-!!lo?(lo>>>0)+hi*4294967296:NaN}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){var offset=convertI32PairToI53Checked(offset_low,offset_high);return 70}var printCharBuffers=[null,[],[]];var printChar=(stream,curr)=>{var buffer=printCharBuffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}};var _fd_write=(fd,iov,iovcnt,pnum)=>{var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;for(var j=0;j<len;j++){printChar(fd,HEAPU8[ptr+j])}num+=len}HEAPU32[pnum>>2]=num;return 0};var wasmImports={d:__emscripten_get_now_is_monotonic,e:_emscripten_date_now,c:_emscripten_resize_heap,f:_fd_close,b:_fd_seek,a:_fd_write};var asm=createWasm();var ___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports[\"h\"])();var _ImageScanner_create=Module[\"_ImageScanner_create\"]=()=>(_ImageScanner_create=Module[\"_ImageScanner_create\"]=wasmExports[\"i\"])();var _ImageScanner_destory=Module[\"_ImageScanner_destory\"]=a0=>(_ImageScanner_destory=Module[\"_ImageScanner_destory\"]=wasmExports[\"j\"])(a0);var _ImageScanner_set_config=Module[\"_ImageScanner_set_config\"]=(a0,a1,a2,a3)=>(_ImageScanner_set_config=Module[\"_ImageScanner_set_config\"]=wasmExports[\"k\"])(a0,a1,a2,a3);var _ImageScanner_enable_cache=Module[\"_ImageScanner_enable_cache\"]=(a0,a1)=>(_ImageScanner_enable_cache=Module[\"_ImageScanner_enable_cache\"]=wasmExports[\"l\"])(a0,a1);var _ImageScanner_recycle_image=Module[\"_ImageScanner_recycle_image\"]=(a0,a1)=>(_ImageScanner_recycle_image=Module[\"_ImageScanner_recycle_image\"]=wasmExports[\"m\"])(a0,a1);var _ImageScanner_get_results=Module[\"_ImageScanner_get_results\"]=a0=>(_ImageScanner_get_results=Module[\"_ImageScanner_get_results\"]=wasmExports[\"n\"])(a0);var _ImageScanner_scan=Module[\"_ImageScanner_scan\"]=(a0,a1)=>(_ImageScanner_scan=Module[\"_ImageScanner_scan\"]=wasmExports[\"o\"])(a0,a1);var _Image_create=Module[\"_Image_create\"]=(a0,a1,a2,a3,a4,a5)=>(_Image_create=Module[\"_Image_create\"]=wasmExports[\"p\"])(a0,a1,a2,a3,a4,a5);var _Image_destory=Module[\"_Image_destory\"]=a0=>(_Image_destory=Module[\"_Image_destory\"]=wasmExports[\"q\"])(a0);var _Image_get_symbols=Module[\"_Image_get_symbols\"]=a0=>(_Image_get_symbols=Module[\"_Image_get_symbols\"]=wasmExports[\"r\"])(a0);var ___errno_location=()=>(___errno_location=wasmExports[\"__errno_location\"])();var _free=Module[\"_free\"]=a0=>(_free=Module[\"_free\"]=wasmExports[\"t\"])(a0);var _malloc=Module[\"_malloc\"]=a0=>(_malloc=Module[\"_malloc\"]=wasmExports[\"u\"])(a0);var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(){if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();\n\n\n  return moduleArg.ready\n}\n\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = zbarWasm;\nelse if (typeof define === 'function' && define['amd'])\n  define([], () => zbarWasm);\n","import zbarJs from 'zbarJs'\nimport type ZBarInstance from './ZBarInstance'\n\nlet zbarInstance: ZBarInstance\n\nconst zbarInstancePromise = (async () => {\n  zbarInstance = await zbarJs()\n  if (!zbarInstance) {\n    throw Error('WASM was not loaded')\n  }\n  return zbarInstance\n})()\n\nexport const getInstance = async (): Promise<ZBarInstance> => {\n  return await zbarInstancePromise\n}\n","/* Copied from https://github.com/mchehab/zbar, release 0.23.90 */\n\nexport enum ZBarSymbolType {\n  ZBAR_NONE\t       = 0,   /**< no symbol decoded */\n  ZBAR_PARTIAL     = 1,   /**< intermediate status */\n  ZBAR_EAN2\t       = 2,   /**< GS1 2-digit add-on */\n  ZBAR_EAN5\t       = 5,   /**< GS1 5-digit add-on */\n  ZBAR_EAN8\t       = 8,   /**< EAN-8 */\n  ZBAR_UPCE\t       = 9,   /**< UPC-E */\n  ZBAR_ISBN10\t     = 10,  /**< ISBN-10 (from EAN-13). @since 0.4 */\n  ZBAR_UPCA\t       = 12,  /**< UPC-A */\n  ZBAR_EAN13\t     = 13,  /**< EAN-13 */\n  ZBAR_ISBN13\t     = 14,  /**< ISBN-13 (from EAN-13). @since 0.4 */\n  ZBAR_COMPOSITE   = 15,  /**< EAN/UPC composite */\n  ZBAR_I25\t       = 25,  /**< Interleaved 2 of 5. @since 0.4 */\n  ZBAR_DATABAR     = 34,  /**< GS1 DataBar (RSS). @since 0.11 */\n  ZBAR_DATABAR_EXP = 35,  /**< GS1 DataBar Expanded. @since 0.11 */\n  ZBAR_CODABAR     = 38,  /**< Codabar. @since 0.11 */\n  ZBAR_CODE39\t     = 39,  /**< Code 39. @since 0.4 */\n  ZBAR_PDF417\t     = 57,  /**< PDF417. @since 0.6 */\n  ZBAR_QRCODE\t     = 64,  /**< QR Code. @since 0.10 */\n  ZBAR_SQCODE\t     = 80,  /**< SQ Code. @since 0.20.1 */\n  ZBAR_CODE93\t     = 93,  /**< Code 93. @since 0.11 */\n  ZBAR_CODE128     = 128, /**< Code 128 */\n\n  /*\n   * Please see _zbar_get_symbol_hash() if adding\n   * anything after 128\n   */\n\n  /** mask for base symbol type.\n   * @deprecated in 0.11, remove this from existing code\n   */\n  ZBAR_SYMBOL = 0x00ff,\n  /** 2-digit add-on flag.\n   * @deprecated in 0.11, a ::ZBAR_EAN2 component is used for\n   * 2-digit GS1 add-ons\n   */\n  ZBAR_ADDON2 = 0x0200,\n  /** 5-digit add-on flag.\n   * @deprecated in 0.11, a ::ZBAR_EAN5 component is used for\n   * 5-digit GS1 add-ons\n   */\n  ZBAR_ADDON5 = 0x0500,\n  /** add-on flag mask.\n   * @deprecated in 0.11, GS1 add-ons are represented using composite\n   * symbols of type ::ZBAR_COMPOSITE; add-on components use ::ZBAR_EAN2\n   * or ::ZBAR_EAN5\n   */\n  ZBAR_ADDON = 0x0700,\n}\n\nexport enum ZBarConfigType {\n  ZBAR_CFG_ENABLE = 0,            /**< enable symbology/feature */\n  ZBAR_CFG_ADD_CHECK,        /**< enable check digit when optional */\n  ZBAR_CFG_EMIT_CHECK,       /**< return check digit when present */\n  ZBAR_CFG_ASCII,            /**< enable full ASCII character set */\n  ZBAR_CFG_BINARY,           /**< don't convert binary data to text */\n  ZBAR_CFG_NUM,              /**< number of boolean decoder configs */\n\n  ZBAR_CFG_MIN_LEN = 0x20,        /**< minimum data length for valid decode */\n  ZBAR_CFG_MAX_LEN,        /**< maximum data length for valid decode */\n\n  ZBAR_CFG_UNCERTAINTY = 0x40,    /**< required video consistency frames */\n\n  ZBAR_CFG_POSITION = 0x80,       /**< enable scanner to collect position data */\n  ZBAR_CFG_TEST_INVERTED,  /**< if fails to decode, test inverted */\n\n  ZBAR_CFG_X_DENSITY = 0x100,     /**< image scanner vertical scan density */\n  ZBAR_CFG_Y_DENSITY,     /**< image scanner horizontal scan density */\n}\n\nexport enum ZBarOrientation {\n  ZBAR_ORIENT_UNKNOWN = -1,       /**< unable to determine orientation */\n  ZBAR_ORIENT_UP,            /**< upright, read left to right */\n  ZBAR_ORIENT_RIGHT,         /**< sideways, read top to bottom */\n  ZBAR_ORIENT_DOWN,          /**< upside-down, read right to left */\n  ZBAR_ORIENT_LEFT,          /**< sideways, read bottom to top */\n}\n","import type ZBarInstance from './ZBarInstance'\n\nexport class CppObject {\n  protected ptr: number\n  protected inst: ZBarInstance\n\n  protected constructor(ptr: number, inst: ZBarInstance) {\n    this.ptr = ptr\n    this.inst = inst\n  }\n\n  protected checkAlive(): void {\n    if (this.ptr) return\n    throw Error('Call after destroyed')\n  }\n\n  getPointer(): number {\n    this.checkAlive()\n    return this.ptr\n  }\n}\n","import { ZBarOrientation, ZBarSymbolType } from './enum'\n\nexport interface Point {\n  x: number\n  y: number\n}\n\nclass TypePointer {\n  protected ptr: number\n  protected ptr32: number\n  protected buf: ArrayBuffer\n  protected HEAP8: Int8Array\n  protected HEAP32: Int32Array\n  protected HEAPU32: Uint32Array\n\n  constructor(ptr: number, buf: ArrayBuffer) {\n    this.ptr = ptr\n    this.ptr32 = ptr >> 2\n    this.buf = buf\n    this.HEAP8 = new Int8Array(buf)\n    this.HEAPU32 = new Uint32Array(buf)\n    this.HEAP32 = new Int32Array(buf)\n  }\n}\n\nclass SymbolPtr extends TypePointer {\n  get type(): ZBarSymbolType {\n    return this.HEAPU32[this.ptr32] as ZBarSymbolType\n  }\n\n  get data(): Int8Array {\n    const\n      len = this.HEAPU32[this.ptr32 + 4],\n      ptr = this.HEAPU32[this.ptr32 + 5];\n    return Int8Array.from(this.HEAP8.subarray(ptr, ptr + len))\n  }\n\n  get points(): Array<Point> {\n    const\n      len = this.HEAPU32[this.ptr32 + 7],\n      ptr = this.HEAPU32[this.ptr32 + 8],\n      ptr32 = ptr >> 2,\n      res: Point[] = [];\n    for (let i = 0; i < len; ++i) {\n      const\n        x = this.HEAP32[ptr32 + i * 2],\n        y = this.HEAP32[ptr32 + i * 2 + 1];\n      res.push({ x, y } as Point)\n    }\n    return res\n  }\n\n  get orientation(): ZBarOrientation {\n    return this.HEAP32[this.ptr32 + 9]\n  }\n\n  get next(): SymbolPtr | null {\n    const ptr = this.HEAPU32[this.ptr32 + 11]\n    if (!ptr) return null\n    return new SymbolPtr(ptr, this.buf)\n  }\n\n  get time(): number {\n    return this.HEAPU32[this.ptr32 + 13]\n  }\n\n  get cacheCount(): number {\n    return this.HEAP32[this.ptr32 + 14]\n  }\n\n  get quality(): number {\n    return this.HEAP32[this.ptr32 + 15]\n  }\n}\n\nclass SymbolSetPtr extends TypePointer {\n  get head(): SymbolPtr | null {\n    const ptr = this.HEAPU32[this.ptr32 + 2]\n    if (!ptr) return null\n    return new SymbolPtr(ptr, this.buf)\n  }\n}\n\nexport class ZBarSymbol {\n  type: ZBarSymbolType\n  typeName: string\n  data: Int8Array\n  points: Array<Point>\n  orientation: ZBarOrientation\n  time: number\n  cacheCount: number\n  quality: number\n  private constructor(ptr: SymbolPtr) {\n    this.type = ptr.type\n    this.typeName = ZBarSymbolType[this.type]\n    this.data = ptr.data\n    this.points = ptr.points\n    this.orientation = ptr.orientation\n    this.time = ptr.time\n    this.cacheCount = ptr.cacheCount\n    this.quality = ptr.quality\n  }\n\n  static createSymbolsFromPtr(ptr: number, buf: ArrayBuffer): Array<ZBarSymbol> {\n    if (ptr == 0) return [];\n\n    const set = new SymbolSetPtr(ptr, buf);\n    let symbol = set.head;\n    const res: ZBarSymbol[] = [];\n    while (symbol !== null) {\n      res.push(new ZBarSymbol(symbol));\n      symbol = symbol.next;\n    }\n    return res;\n  }\n\n  decode(encoding?: string) {\n    const decoder = new TextDecoder(encoding);\n    return decoder.decode(this.data);\n  }\n}\n","import { CppObject } from './CppObject'\nimport { ZBarSymbol } from './ZBarSymbol'\nimport { getInstance } from './instance'\n\nexport class ZBarImage extends CppObject {\n  static async createFromGrayBuffer(\n    width: number,\n    height: number,\n    dataBuf: ArrayBuffer,\n    sequence_num: number = 0\n  ): Promise<ZBarImage> {\n    const\n      inst = await getInstance(),\n      data = new Uint8Array(dataBuf),\n      len = width * height;\n    if (len !== data.byteLength) {\n      throw Error(`data length (${data.byteLength} bytes) does not match width and height (${len} bytes)`)\n    }\n    const\n      buf = inst._malloc(len),\n      heap = inst.HEAPU8;\n    heap.set(data, buf)\n    const ptr = inst._Image_create(\n      width,\n      height,\n      0x30303859 /* Y800 */,\n      buf,\n      len,\n      sequence_num\n    )\n    return new this(ptr, inst)\n  }\n\n  static async createFromRGBABuffer(\n    width: number,\n    height: number,\n    dataBuf: ArrayBuffer,\n    sequence_num: number = 0\n  ): Promise<ZBarImage> {\n    const\n      inst = await getInstance(),\n      data = new Uint8Array(dataBuf),\n      len = width * height;\n    if (len * 4 !== data.byteLength) {\n      throw Error(`data length (${data.byteLength} bytes) does not match width and height (${len * 4} bytes)`)\n    }\n    const\n      buf = inst._malloc(len),\n      bufEnd = buf + len,\n      heap = inst.HEAPU8;\n    for (let i = buf, j = 0; i < bufEnd; i++, j += 4) {\n      heap[i] = (\n        data[j] * 19595 +\n        data[j + 1] * 38469 +\n        data[j + 2] * 7472\n      ) >> 16\n    }\n    const ptr = inst._Image_create(\n      width,\n      height,\n      0x30303859 /* Y800 */,\n      buf,\n      len,\n      sequence_num\n    )\n    return new this(ptr, inst)\n  }\n\n  destroy(): void {\n    this.checkAlive()\n    this.inst._Image_destory(this.ptr)\n    this.ptr = 0\n  }\n\n  getSymbols(): Array<ZBarSymbol> {\n    this.checkAlive()\n    const res = this.inst._Image_get_symbols(this.ptr)\n    return ZBarSymbol.createSymbolsFromPtr(res, this.inst.HEAPU8.buffer)\n  }\n}\n","import { CppObject } from './CppObject'\nimport { ZBarImage } from './ZBarImage'\nimport { getInstance } from './instance'\nimport { ZBarSymbol } from './ZBarSymbol'\nimport { ZBarSymbolType, ZBarConfigType } from './enum'\n\nexport class ZBarScanner extends CppObject {\n  static async create(): Promise<ZBarScanner> {\n    const\n      inst = await getInstance(),\n      ptr = inst._ImageScanner_create();\n    return new this(ptr, inst)\n  }\n\n  destroy(): void {\n    this.checkAlive()\n    this.inst._ImageScanner_destory(this.ptr)\n    this.ptr = 0\n  }\n\n  setConfig(sym: ZBarSymbolType, conf: ZBarConfigType, value: number): number {\n    this.checkAlive()\n    return this.inst._ImageScanner_set_config(this.ptr, sym, conf, value)\n  }\n\n  enableCache(enable: boolean = true): void {\n    this.checkAlive()\n    this.inst._ImageScanner_enable_cache(this.ptr, enable)\n  }\n\n  recycleImage(image: ZBarImage): void {\n    this.checkAlive()\n    this.inst._ImageScanner_recycle_image(this.ptr, image.getPointer())\n  }\n\n  getResults(): Array<ZBarSymbol> {\n    this.checkAlive()\n    const res = this.inst._ImageScanner_get_results(this.ptr)\n    return ZBarSymbol.createSymbolsFromPtr(res, this.inst.HEAPU8.buffer)\n  }\n\n  scan(image: ZBarImage): number {\n    this.checkAlive()\n    return this.inst._ImageScanner_scan(this.ptr, image.getPointer())\n  }\n}\n","import { ZBarImage } from './ZBarImage'\nimport { ZBarScanner } from './ZBarScanner'\nimport { ZBarSymbol } from './ZBarSymbol'\nimport { ZBarConfigType, ZBarSymbolType } from './enum'\n\n// Returns a new ZBarScanner instance that delegates QR code text decoding\n// to the native TextDecoder (fixes #7: Issue with utf-8)\nexport const getDefaultScanner = async () => {\n  const scanner = await ZBarScanner.create()\n  scanner.setConfig(ZBarSymbolType.ZBAR_NONE, ZBarConfigType.ZBAR_CFG_BINARY, 1)\n  return scanner\n}\n\nlet defaultScanner: ZBarScanner\n\nconst scanImage = async (\n  image: ZBarImage,\n  scanner?: ZBarScanner\n): Promise<Array<ZBarSymbol>> => {\n  if (scanner === undefined) {\n    // Create the default scanner lazily\n    scanner = defaultScanner || await getDefaultScanner()\n    defaultScanner = scanner\n  }\n  const res = scanner.scan(image)\n  if (res < 0) {\n    throw Error('Scan Failed')\n  }\n  if (res === 0) return []\n  return image.getSymbols()\n}\nexport const scanGrayBuffer = async (\n  buffer: ArrayBuffer,\n  width: number,\n  height: number,\n  scanner?: ZBarScanner\n): Promise<Array<ZBarSymbol>> => {\n  const\n    image = await ZBarImage.createFromGrayBuffer(width, height, buffer),\n    res = await scanImage(image, scanner);\n  image.destroy()\n  return res\n}\nexport const scanRGBABuffer = async (\n  buffer: ArrayBuffer,\n  width: number,\n  height: number,\n  scanner?: ZBarScanner\n): Promise<Array<ZBarSymbol>> => {\n  const\n    image = await ZBarImage.createFromRGBABuffer(width, height, buffer),\n    res = await scanImage(image, scanner);\n  image.destroy()\n  return res\n}\nexport const scanImageData = async (\n  image: ImageData,\n  scanner?: ZBarScanner\n): Promise<Array<ZBarSymbol>> => {\n  return await scanRGBABuffer(\n    image.data.buffer,\n    image.width,\n    image.height,\n    scanner\n  )\n}\n"],"names":["_scriptDir","zbarWasm","document","currentScript","src","undefined","__filename","moduleArg","readyPromiseResolve","readyPromiseReject","Module","Promise","resolve","reject","read_","readAsync","readBinary","moduleOverrides","Object","assign","ENVIRONMENT_IS_WEB","window","ENVIRONMENT_IS_WORKER","importScripts","ENVIRONMENT_IS_NODE","process","versions","node","scriptDirectory","fs","require$$0","nodePath","require$$1","dirname","__dirname","filename","binary","isFileURI","URL","normalize","readFileSync","ret","buffer","Uint8Array","onload","onerror","readFile","err","data","argv","length","replace","slice","self","location","href","indexOf","substr","lastIndexOf","url","xhr","XMLHttpRequest","open","send","responseText","responseType","response","status","wasmBinary","wasmMemory","wasmExports","out","console","log","bind","error","WebAssembly","abort","HEAPU8","HEAPU32","ABORT","updateMemoryViews","b","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float32Array","Float64Array","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","runDependencies","dependenciesFulfilled","what","e","RuntimeError","wasmBinaryFile","path","dataURIPrefix","isDataURI","startsWith","getBinarySync","file","instantiateArrayBuffer","binaryFile","imports","receiver","fetch","credentials","then","catch","getBinaryPromise","instantiate","instance","reason","calledRun","callRuntimeCallbacks","callbacks","shift","growMemory","size","pages","byteLength","grow","UTF8Decoder","TextDecoder","printCharBuffers","printChar","stream","curr","heapOrArray","idx","maxBytesToRead","endIdx","endPtr","decode","subarray","str","u0","u1","u2","String","fromCharCode","ch","UTF8ArrayToString","push","wasmImports","d","Date","now","c","requestedSize","oldSize","maxHeapSize","x","multiple","cutDown","overGrownHeapSize","Math","min","newSize","max","f","fd","offset_low","offset_high","whence","newOffset","a","iov","iovcnt","pnum","num","i","ptr","len","j","run","doRun","cb","unshift","postRun","preRun","setTimeout","callback","info","receiveInstance","module","exports","id","removeRunDependency","result","instantiateStreaming","createWasm","a0","a1","a2","a3","a4","a5","runCaller","pop","ready","zbarInstance","zbarInstancePromise","__awaiter","zbarJs","Error","getInstance","ZBarSymbolType","ZBarConfigType","ZBarOrientation","CppObject","constructor","inst","this","checkAlive","getPointer","TypePointer","buf","ptr32","HEAP8","HEAP32","SymbolPtr","type","from","points","res","y","orientation","next","time","cacheCount","quality","SymbolSetPtr","head","ZBarSymbol","typeName","createSymbolsFromPtr","symbol","encoding","ZBarImage","createFromGrayBuffer","width","height","dataBuf","sequence_num","_malloc","set","_Image_create","createFromRGBABuffer","bufEnd","heap","destroy","_Image_destory","getSymbols","_Image_get_symbols","ZBarScanner","create","_ImageScanner_create","_ImageScanner_destory","setConfig","sym","conf","value","_ImageScanner_set_config","enableCache","enable","_ImageScanner_enable_cache","recycleImage","image","_ImageScanner_recycle_image","getResults","_ImageScanner_get_results","scan","_ImageScanner_scan","getDefaultScanner","scanner","ZBAR_NONE","ZBAR_CFG_BINARY","defaultScanner","scanImage","scanRGBABuffer"],"mappings":"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"}